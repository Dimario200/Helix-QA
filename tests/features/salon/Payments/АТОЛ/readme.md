# Описание автотестов по оплатам.

Для автотестирования созданы следующие сценарии:

-   **`Возвраты.`**
-   **`Проверка НДС (VAT).`**
-   **`Проверка НДС(VAT) по цене.`**
-   **`Проверка PaymentMethod 1-7.`**
-   **`Проверка TaxationSystem 0-5.`**

### <details><summary>(Выпадающий список)Описание сценариев автотеста "Проверка НДС (VAT)".</summary>

-   **Сценарий: 01. Первоначальная настройка**

Еще до настроек у нас в блоке переменных запонимаются следующие значения:

-   VATRate_Услуга_2 =	"20"
-   VATAmount_Услуга_2 = "116.67"
-   СтавкаНДС_Услуга_2 = 20"
-   СуммаНДС_Услуга_2 = "116,67"

Удаляются все переменные. Через регистр сведений "ПрименениеСистемНалогообложения" удаляются все строки что в нем есть. Удаляются все объекты без контроля ссылок в справочнике Ставки НДС(за исключение предопределенных, их этот шаг удалить не может). После удаления ставок НДС создаются новые через экспортный сценарий.

После создания новых ставок НДС переходится в справочник "Организации" и выбирается текущая строка, после открытия организации в ней в полях налогообалежния для товара, аванса, услуги выставляется общая система налооблажения и ставка НДС "Без НДС". Также создается еще одно поле, но уже со своей группой и со своими настройка СНО = Общая, НДС = 20%.

После настройки организации создаются следующие объекты: Клиент, мастер, услуга салона красоты 1 и 2. Во второй услуге выставляется своя группа налогооблажения.

-   **Сценарий: 02. В чеке "VATRate=none"**

Происходит проверка прошлого сценария на ошибки, если ошибки были, то весь фича файл останавливает своё выполнение. Потом заходится в организацию и в ней еще раз выбирает для всех позиций ставка НДС "Без НДС".

Запускается экспортный сценарий "Я проверяю xml реализации НДС (VAT)". В нем создается продажа в которой потом генерируются переменные для проверка XML чека и для проверки текстового чека.

Запускается потом другой экспортный сценарий "Я проверяю xml возврата реализации НДС (VAT)". Создается возврат по продаже, также генерируются переменные для провки чека XML и текстового.

Запускается потом экспортный сценарий "Я проверяю xml с приорететом номенклатуры реализации НДС (VAT)". Где уже делаетс продажа второй услуги салона красоты, где находится своя группа налогооблажения.

-   **Сценарий: 03. В чеке "VATRate=0"**
-   **Сценарий: 04. В чеке "VATRate=5"**
-   **Сценарий: 05. В чеке "VATRate=7"**
-   **Сценарий: 06. В чеке "VATRate=10"**
-   **Сценарий: 07. В чеке "VATRate=18"**
-   **Сценарий: 08. В чеке "VATRate=20"**

Эти сценарии работают на аналогии с тем, что описан выше, сначала идет запись переменных, затем смена ставки НДС в организации, а потом проверка чеков с помощью трех экспортный сценариев.

-   **Сценарий: 09. Очистка поля СтавкаНДС в Организации**

Открывается организация, в ней удаляется отдельная группа налогображения и везде выставляется ставка НДС "Без НДС".

</details>





