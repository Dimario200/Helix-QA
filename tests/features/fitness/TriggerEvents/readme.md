# Для автотестирования триггеров в Фитнес клубе созданы след.фичи:
1) **`ТриггерБонусныеСчетаФитнес.feature`**  [Перейти к описанию](#title1)
2) **`ТриггерЗаявкиСделкиФитнес.feature`**   [Перейти к описанию](#title2)
3) **`ТриггерКлиентыФитнес.feature`**        [Перейти к описанию](#title3)
4) **`ТриггерЛицевыеСчетаФитнес.feature`**   [Перейти к описанию](#title4)
5) **`ТриггерЗанятиеФитнес.feature`**        [Перейти к описанию](#title5)
6) **`ЧПУФитнесСтома.feature`**              [Перейти к описанию](#title6)

1. <a id="title1">Описание автотеста - Бонусные счета фитнес.</a>

___В данном фича файле проверяются следующие события: Начисление на бонусный счет, Окончание срока действия бонусного счета, Окончание срока действия начисления на бонусный счет, Списание с бонусного счета.___
<details><summary>(Выпадающий список)Описание сценариев по бонусным счетам фитнеса: </summary>


-   **Сценарий: Начальное заполнение ИБ.**

Удаляются все существующие триггерные события из списка. Генерируется случайное число, создается тренер, шаблон сообщения, клиент, персональная услуга, помещение.

-   **Сценарий: Проверка количество и порядок триггеров.**

Проверяется выполнилось ли "Начальное заполениен ИБ" на ошибки. В случае возникновения ошибок весь фича файл останавливается. И проверяется какие триггеры присутствуют в выпадающем списке.

-   **Сценарий: Создание триггерных событий для фитнеса.**

Создаются все триггерные события, которые были указаны для проверки выше.

-   **Сценарий: Активация - Начисление на бонусный счет.**

Открывается справочник бонусный счетов в форме создания, в ней создается новый бонусный счет и приветственный начислением и этот вид бонусного счета добавляется клиенту.

-   **Сценарий: Активация - Окончание срока действия начисления на бонусный счет.**

Создается новый вид бонусного счета со сроком действия, даты С и По выставляются на завтра. Данный счет добавляется клиенту и условие выполняется сразу.

-   **Сценарий: Активация - Списание с бонусного счета.**

Через документ "Операции по бонусного счету" делается списание со счета клиента. После запускается регламент регистрации триггерных событий.

-   **Сценарий:  Проверка журнала - Начисление на бонусный счет.**
-   **Сценарий:  Проверка журнала - Окончание срока действия бонусного счета.**
-   **Сценарий:  Проверка журнала - Окончание срока действия начисления на бонусный счет.**
-   **Сценарий:  Проверка журнала - Списание с бонусного счета.**

Во всех сценариях проверки журнала, проверяется журнал регистрации триггерных событиях, проверяется сама табличная часть на наличие событий которые в автотесте записаны в шаблон.
</details>

2. <a id="title2">Описание автотеста - Заявки/Cделки фитнес.</a>

___В данном фича файле для Заявок проверяется событие "Заявка не обработана в течение", а для Сделок проверяются: Задержка на этапе более, Задержка на этапе каждые,Переход с этапа на этап.___

<details><summary>(Выпадающий список)Описание сценариев по заявкам и сделкам в фитнесе:</summary>


-   **Сценарий: Начальное заполнение ИБ.**

Удаляются все существующие триггерные события из списка. Генерируется случайное число, создается тренер, шаблон сообщения, клиент, рекламный источник для заявок.

-   **Сценарий: Проверка количество и порядок триггеров.**

Проверяется выполнилось ли "Начальное заполениен ИБ" на ошибки. В случае возникновения ошибок весь фича файл останавливается. И проверяется какие триггеры присутствуют в выпадающем списке.

-   **Сценарий: Создание триггеров по Заявкам/Обращениям в фитнесе.**

Создается триггер по заявкам с условием "Заявка не обработана в течение" с выбранным временем в одну минуту.

-   **Сценарий: Создание триггеров по сделкам в фитнесе.**

Создаются три триггерных события с условиями: Задержка на этапе более, Задержка на этапе каждые, Переход с этапа на этап.

-   **Сценарий: Активация триггеров по заявкам.**

Создается заявка на текущую дату и время.

-   **Сценарий: Активация триггеров по сделкам.**

Активация - Переход с этапа на этап. Для него создается сделка с датой на Позавчера. 

Активация - Задержка на этапе каждые (1 день). Программно создается сделка на задние число. Потом через универсальный редактор данной сделке делается смена этапа с указанием даты Позавчера. После запускается регламент регистрации триггерных событий.

-   **Проверка журнала триггеров по заявкам фитнеса.**
-   **Проверка журнала триггеров по заявкам фитнеса.**

Во всех сценариях проверки журнала, проверяется журнал регистрации триггерных событиях, проверяется сама табличная часть на наличие событий которые в автотесте записаны в шаблон.
</details>

3. <a id="title3">Описание автотеста - Клиенты Фитнес.</a>

___В данном фича файле для клиентов проверяются следующие события: День рождения клиента, Окончание срока действия медицинской справки, Онлайн регистрация клиента, Посещение клуба, Проведенное занятие, Смена статуса.___

<details><summary>(Выпадающий список)Описание сценариев по клиентам в фитнесе:</summary>


-   **Сценарий: Начальное заполнение ИБ.**

Удаляются все существующие триггерные события из списка. Генерируется случайное число, создается тренер, шаблон сообщения, клиент, членство(внутри него создается персональная услуга), помещение.

-   **Сценарий: Проверка количество и порядок триггеров.**

Проверяется выполнилось ли "Начальное заполениен ИБ" на ошибки. В случае возникновения ошибок весь фича файл останавливается. И проверяется какие триггеры присутствуют в выпадающем списке.

-   **Сценарий: Создание триггерных событий фитнес.**

Создаются триггерные события по клиентам с выше указаннами условиями.

-   **Сценарий: Активация триггерных событий фитнеса.**

Активация - Окончание срока действия медицинской справки. Открывается по навиг.ссылке созданным клиент и через его карточку добавляется мед.справка со сродом действия в 1 день.

Активация - Онлайн регистрация клиента. Открывается обработка API и через нее эмулируется онлайн регистрация клиента в виджете расписания.

Активация - Смена статуса. Создается продажа членства на нашего клиента чтобы он стал членом клуба.

Активация - Посещение клуба. После продажи членства этому клиенту делается вход с рецепции.

Активация - Проведенное занятие. На этого же клиента создается персональное занятие и выполняется.

Активация - День рождения клиента. В карточке клиента указывается дата рождения от текущего числа.

После всех активаций запускается регламент регистрации триггерных событий.

-   **Сценарий: Проверка журнала - Окончание срока действия медицинской справки/страхового полиса.**
-   **Сценарий: Проверка журнала - Проверка журнала - Онлайн регистрация клиента.**
-   **Сценарий: Проверка журнала - День рождения клиента.**
-   **Сценарий: Проверка журнала - Посещение клуба.**
-   **Сценарий: Проверка журнала - Смена статуса.**
-   **Сценарий: Проверка журнала - Проведенное занятие.**

Во всех сценариях проверки журнала, проверяется журнал регистрации триггерных событиях, проверяется сама табличная часть на наличие событий которые в автотесте записаны в шаблон.

</details>

4. <a id="title4">Описание автотеста - Лицевые cчета Фитнес.</a>

___В данном фича файле для лицевых счетов проверяются следующие события: Взнос на лицевой счет, Списание с лицевого счета, Остаток денежных средств на лицевом счете меньше или равен, Окончание срока действия лицевого счета.___

<details><summary>(Выпадающий список)Описание сценариев по лицевым счетам в фитнесе:</summary>

-   **Сценарий: Начальное заполнение ИБ.**

Удаляются все существующие триггерные события из списка. Генерируется случайное число, создается тренер, шаблон сообщения, клиент, персональная услуга, помещение.

-   **Сценарий: Проверка созданных данных и наличие всех триггеров.**

Проверяется выполнилось ли "Начальное заполениен ИБ" на ошибки. В случае возникновения ошибок весь фича файл останавливается. И проверяется какие триггеры присутствуют в выпадающем списке.

-   **Сценарий: Создание триггеров для фитнеса.**

Создаются триггерные события по всех указанным условиям выше.

-   **Сценарий: Активация триггерных собитый фитнес.**

Активация триггера - Взнос на лицевой счет. Открывается рецепция и на нем выводится созданным нами клиент. И уже через рецепцию делается взнос на основной лицевой счет.

Активация триггера - Остаток денежных средств на лицевом счете меньше или равен. Создается продажа персональной услуги и оплачивается с лицевого счета.

Активация триггера - Окончание срока действия лицевого счета (до события). Открывается рецепция и в ней выбирается клиент, на рецепции нажимается кнопка взноса на лицевой счет и с формы оплаты создается новый вид лицевого счета, со установленый сроком действия С/по(Завтра).

Активация триггера - Списание с лицевого счета. Продается персональная услуга и оплачивается с лицевого счета.

После всех активаций происходит запуск регламента регистрация триггерных событий.

-   **Сценарий: Проверка журнала в фитнесе.**

В сценарии проверки журнала, проверяется журнал регистрации триггерных событиях, проверяется сама табличная часть на наличие событий которые в автотесте записаны в шаблон.

</details>

5. <a id="title5">Описание автотеста - Занятия Фитнес.</a>

___В данном фича файле для занятий проверяются следующие события: Замена занятия, Замена инструктора, Занятие отменено клубом/клиентом, Занятие проведено (клиент прибыл), Запись клиента в лист ожидания, Запись клиента на занятие, Клиент прибыл на занятие, Начало занятия  (в разрезе клиента), Начало занятия  (в разрезе тренера), Онлайн бронирование без оплаты, Перенос даты и времени начала, Списание услуги по неявке, Списание услуги, клиент прибыл.___

<details><summary>(Выпадающий список)Описание сценариев по занятиям в фитнесе:</summary>

-   **Сценарий: Начальное заполнение ИБ.**

Удаляются все существующие триггерные события из списка. Генерируется случайное число, создается тренер, шаблон сообщения, клиент, пакет услуг, помещение и даты.

-   **Сценарий: Проверка количество и порядок триггеров.**

Проверяется выполнилось ли "Начальное заполениен ИБ" на ошибки. В случае возникновения ошибок весь фича файл останавливается. И проверяется какие триггеры присутствуют в выпадающем списке.

-   **Сценарий: Проверка конфигурации и создание триггеров для фитнеса.**

Создаются все выше указанные события триггерных событий.

-   **Сценарий: Аквитация триггерных событий фитнеса.**

Активация триггера - Запись клиента в лист ожидания. Создается второй клиент. Потом создается занятие с ограниченным кол-ом клиентов на его посещение, в его состав записывается первый клиент. После записи занятия открывается обработка API и через нее прокидывается запрос на запись второго клиента в лист ожидания. После этого создается новое занятие для другого триггера.

Активация триггера - Замена занятия и Замена тренера. Открывается новое занятие по навиг.ссылке и внем делается смена номенклатуры и тренера(ранее тренер не указывался в занятие). И выполняется запуск регламента регистрация триггерных событий.

В промежутке продается пакет услуг первому клиенту.

Активация триггера - Перенос даты и времени начала. Создается новое групповое занятие, запоминается его навиг.ссылка в переменную, а потом открывается занятие повторно и в нем делается смена времени начала.

Активация триггеров - Занятие проведено(клиент прибыл) и Клиент прибыл на занятие. Создается новое занятие, клиенту в этом занятие выставляется статус прибыл и занятие переводят в выполненное.

Активация триггера - Занятие отменено клубом/клиентом. Создается новое занятие. Создается причина отмены со стороны клиента. Повторно открывается занятие и отменяет с выбором уже новом причины отмены.

Активация триггера - Списание услуги по неявке. Открывается групповая услуга, в ней меняется тип списания на "Записан и не отменил". Создается новое занятие и в нем время выставляется на час больше от текущего, затем занятие

Активация триггера - Клиент не прибыл на занятие (Персональное/Групповое). Создается новое занятие, выставляется время занятия на час вперед от текущего и выставляется что занятие выполнено.

Создание - Клиент не прибыл на занятие (Персональное/Групповое). Создается триггер по тому что клиент не прибыл, т.к триггер отрабатывает в момент создания.

Активация триггера- Онлайн бронирование без оплаты. Открывается рецепция выбирает первый клиент и делается возврат последних оснований для будущих занятий. Открывается номенклатура групповой услуги, в ней выставляются два флага онлайн расписание и онлайн бронирование. Создается новое занятие со временем на час больше от текущего. Затем открывается обработка API и через нее делается онлайн запись без выбранного основания.

После всех активаций происходит запуск регламента регистрации триггерных событий.

-   **Сценарий: Проверка активации триггерных событий фитнеса.**

В сценарии проверки журнала, проверяется журнал регистрации триггерных событиях, проверяется сама табличная часть на наличие событий которые в автотесте записаны в шаблон.

</details>

6. <a id="title6">Описание автотеста - ЧПУ Фитнес.</a>

___В данном фича файле для ЧПУ проверяются следующие события: Активация членства/пакета услуг, Заморозка членства/пакета услуг, Оказание услуг включенных в членство/пакет услуг, Списание гостевых посещений включенных в членство/пакет услуг, Остаток услуг/посещений членства/пакета меньше или равен, Окончание срока действия членства/пакета услуг, Продление членства/пакета услуг.___

<details><summary>(Выпадающий список)Описание сценариев по ЧПУ в фитнесе:</summary>

-   **Сценарий: Первоначальная настройка**

Удаляются все существующие триггерные события из списка. Генерируется случайное число, создается тренер, шаблон сообщения, клиент, членство, помещение и даты.

-   **Сценарий: Проверка количество и порядок триггеров**

Проверяется выполнилось ли "Начальное заполениен ИБ" на ошибки. В случае возникновения ошибок весь фича файл останавливается. И проверяется какие триггеры присутствуют в выпадающем списке.

-   **Создаются все триггерные события по условиям которые указаны выше.**

-   **Сценарий: Активация - Активация членства/пакета услуг**

Создаются продажи двух членств клиенту по отдельности, первое активируется само, а второе активируем принудительное с рецепции.

-   **Сценарий: Активация - Заморозка членства/пакета услуг**

Открывается рецепция и с нее на форме находится членство у которого есть кнопка заморозки, на нее нажимается и делается заморозка сроком на 5 дней.

-   **Сценарий: Активация - Оказание услуг включенных в членство/пакет услуг**

Создается персональное занятие для списание услуги из членства.

-   **Сценарий: Активация - Списание гостевых посещений включенных в членство/пакет услуг**

Создается отдельно посещение с пометкой что оно гостевое с указанием всех вводным данных для его списания из уже проданного членства.

После этого происходит запуск регламент регистрации триггерных событий.

-   **Сценарий: Создание - Активация членства/пакета услуг**  

Создается этот триггер после этих активаций специально для того, что он отрабатывает только в момент его создания, поэтому его не целесообразно создавать первее продажи членства.

-   **Сценарии с проверкой журнала регистрации**

В сценарии проверки журнала, проверяется журнал регистрации триггерных событиях, проверяется сама табличная часть на наличие событий которые в автотесте записаны в шаблон.

</details>

# Для автотестирования триггеров в Стоматологии созданы след.фичи:
- **`ТриггерБонусныеСчета.feature`**        [Перейти к описанию](#title7)    
- **`ТриггерЗаписиНаПриёмСтоматология`**    [Перейти к описанию](#title8)
- **`ТриггерЗаявкиСделкиСтома.feature`**    [Перейти к описанию](#title9)
- **`ТриггерЛицевыеСчетаСтома.feature`**    [Перейти к описанию](#title10)
- **`ТриггерПациентСтома.feature`**         [Перейти к описанию](#title11)
- **`ТриггерПриёмСтома.feature`**           [Перейти к описанию](#title12)
- **`ТриггерСотрудникиСтома.feature`**      [Перейти к описанию](#title13)