# Для автотестирования триггеров в Фитнес клубе созданы след.фичи:
- **`ТриггерБонусныеСчетаФитнес.feature`**  [Перейти к описанию](#title1)
- **`ТриггерЗаявкиСделкиФитнес.feature`**   [Перейти к описанию](#title2)
- **`ТриггерКлиентыФитнес.feature`**        [Перейти к описанию](#title3)
- **`ТриггерЛицевыеСчетаФитнес.feature`**   [Перейти к описанию](#title4)
- **`ТриггерЗанятиеФитнес.feature`**        [Перейти к описанию](#title5)
- **`ЧПУФитнесСтома.feature`**              [Перейти к описанию](#title6)

# Для автотестирования триггеров в Стоматологии созданы след.фичи:
- **`ТриггерБонусныеСчета.feature`**        [Перейти к описанию](#title7)    
- **`ТриггерЗаписиНаПриёмСтоматология`**    [Перейти к описанию](#title8)
- **`ТриггерЗаявкиСделкиСтома.feature`**    [Перейти к описанию](#title9)
- **`ТриггерЛицевыеСчетаСтома.feature`**    [Перейти к описанию](#title10)
- **`ТриггерПациентСтома.feature`**         [Перейти к описанию](#title11)
- **`ТриггерПриёмСтома.feature`**           [Перейти к описанию](#title12)
- **`ТриггерСотрудникиСтома.feature`**      [Перейти к описанию](#title13)

1. <a id="title1">Описание автотеста - Бонусные счета фитнес.</a>

___В данном фича файле проверяются следующие события: Начисление на бонусный счет, Окончание срока действия бонусного счета, Окончание срока действия начисления на бонусный счет, Списание с бонусного счета.___
<details><summary>(Выпадающий список)Описание сценариев по бонусным счетам фитнеса: </summary>


-   **Сценарий: Начальное заполнение ИБ.**

Удаляются все существующие триггерные события из списка. Генерируется случайное число, создается тренер, шаблон сообщения, клиент, персональная услуга, помещение.

-   **Сценарий: Проверка количество и порядок триггеров.**

Проверяется выполнилось ли "Начальное заполениен ИБ" на ошибки. В случае возникновения ошибок весь фича файл останавливается. И проверяется какие триггеры присутствуют в выпадающем списке.

-   **Сценарий: Создание триггерных событий для фитнеса.**

Создаются все триггерные события, которые были указаны для проверки выше.

-   **Сценарий: Активация - Начисление на бонусный счет.**

Открывается справочник бонусный счетов в форме создания, в ней создается новый бонусный счет и приветственный начислением и этот вид бонусного счета добавляется клиенту.

-   **Сценарий: Активация - Окончание срока действия начисления на бонусный счет.**

Создается новый вид бонусного счета со сроком действия, даты С и По выставляются на завтра. Данный счет добавляется клиенту и условие выполняется сразу.

-   **Сценарий: Активация - Списание с бонусного счета.**

Через документ "Операции по бонусного счету" делается списание со счета клиента. После запускается регламент регистрации триггерных событий.

-   **Сценарий:  Проверка журнала - Начисление на бонусный счет.**
-   **Сценарий:  Проверка журнала - Окончание срока действия бонусного счета.**
-   **Сценарий:  Проверка журнала - Окончание срока действия начисления на бонусный счет.**
-   **Сценарий:  Проверка журнала - Списание с бонусного счета.**

Во всех сценариях проверки журнала, проверяется журнал регистрации триггерных событиях, проверяется сама табличная часть на наличие событий которые в автотесте записаны в шаблон.
</details>

2. <a id="title2">Описание автотеста - Заявки/Cделки фитнес.</a>

___В данном фича файле для Заявок проверяется событие "Заявка не обработана в течение", а для Сделок проверяются: Задержка на этапе более, Задержка на этапе каждые,Переход с этапа на этап.___

<details><summary>(Выпадающий список)Описание сценариев по заявкам и сделкам в фитнесе:</summary>


-   **Сценарий: Начальное заполнение ИБ.**

Удаляются все существующие триггерные события из списка. Генерируется случайное число, создается тренер, шаблон сообщения, клиент, рекламный источник для заявок.

-   **Сценарий: Проверка количество и порядок триггеров.**

Проверяется выполнилось ли "Начальное заполениен ИБ" на ошибки. В случае возникновения ошибок весь фича файл останавливается. И проверяется какие триггеры присутствуют в выпадающем списке.

-   **Сценарий: Создание триггеров по Заявкам/Обращениям в фитнесе.**

Создается триггер по заявкам с условием "Заявка не обработана в течение" с выбранным временем в одну минуту.

-   **Сценарий: Создание триггеров по сделкам в фитнесе.**

Создаются три триггерных события с условиями: Задержка на этапе более, Задержка на этапе каждые, Переход с этапа на этап.

-   **Сценарий: Активация триггеров по заявкам.**

Создается заявка на текущую дату и время.

-   **Сценарий: Активация триггеров по сделкам.**

Активация - Переход с этапа на этап. Для него создается сделка с датой на Позавчера. 

Активация - Задержка на этапе каждые (1 день). Программно создается сделка на задние число. Потом через универсальный редактор данной сделке делается смена этапа с указанием даты Позавчера. После запускается регламент регистрации триггерных событий.

-   **Проверка журнала триггеров по заявкам фитнеса.**
-   **Проверка журнала триггеров по заявкам фитнеса.**

Во всех сценариях проверки журнала, проверяется журнал регистрации триггерных событиях, проверяется сама табличная часть на наличие событий которые в автотесте записаны в шаблон.
</details>

3. <a id="title3">Описание автотеста - Клиенты Фитнес.</a>

___В данном фича файле для клиентов проверяются следующие события: День рождения клиента, Окончание срока действия медицинской справки, Онлайн регистрация клиента, Посещение клуба, Проведенное занятие, Смена статуса.___

<details><summary>(Выпадающий список)Описание сценариев по клиентам в фитнесе:</summary>


-   **Сценарий: Начальное заполнение ИБ.**

Удаляются все существующие триггерные события из списка. Генерируется случайное число, создается тренер, шаблон сообщения, клиент, членство(внутри него создается персональная услуга), помещение.

-   **Сценарий: Проверка количество и порядок триггеров.**

Проверяется выполнилось ли "Начальное заполениен ИБ" на ошибки. В случае возникновения ошибок весь фича файл останавливается. И проверяется какие триггеры присутствуют в выпадающем списке.

-   **Сценарий: Создание триггерных событий фитнес.**

Создаются триггерные события по клиентам с выше указаннами условиями.

-   **Сценарий: Активация триггерных событий фитнеса.**

Активация - Окончание срока действия медицинской справки. Открывается по навиг.ссылке созданным клиент и через его карточку добавляется мед.справка со сродом действия в 1 день.

Активация - Онлайн регистрация клиента. Открывается обработка API и через нее эмулируется онлайн регистрация клиента в виджете расписания.

Активация - Смена статуса. Создается продажа членства на нашего клиента чтобы он стал членом клуба.

Активация - Посещение клуба. После продажи членства этому клиенту делается вход с рецепции.

Активация - Проведенное занятие. На этого же клиента создается персональное занятие и выполняется.

Активация - День рождения клиента. В карточке клиента указывается дата рождения от текущего числа.

После всех активаций запускается регламент регистрации триггерных событий.

-   **Сценарий: Проверка журнала - Окончание срока действия медицинской справки/страхового полиса.**
-   **Сценарий: Проверка журнала - Проверка журнала - Онлайн регистрация клиента.**
-   **Сценарий: Проверка журнала - День рождения клиента.**
-   **Сценарий: Проверка журнала - Посещение клуба.**
-   **Сценарий: Проверка журнала - Смена статуса.**
-   **Сценарий: Проверка журнала - Проведенное занятие.**

Во всех сценариях проверки журнала, проверяется журнал регистрации триггерных событиях, проверяется сама табличная часть на наличие событий которые в автотесте записаны в шаблон.

</details>

4. <a id="title4">Описание автотеста - Лицевые cчета Фитнес.</a>

___В данном фича файле для клиентов проверяются следующие события: Взнос на лицевой счет, Списание с лицевого счета, Остаток денежных средств на лицевом счете меньше или равен, Окончание срока действия лицевого счета.___

<details><summary>(Выпадающий список)Описание сценариев по лицевым счетам в фитнесе:</summary>

-   **Сценарий: Начальное заполнение ИБ.**

Удаляются все существующие триггерные события из списка. Генерируется случайное число, создается тренер, шаблон сообщения, клиент, персональная услуга, помещение.

-   **Сценарий: Проверка созданных данных и наличие всех триггеров.**

Проверяется выполнилось ли "Начальное заполениен ИБ" на ошибки. В случае возникновения ошибок весь фича файл останавливается. И проверяется какие триггеры присутствуют в выпадающем списке.

-   **Сценарий: Создание триггеров для фитнеса.**

Создаются триггерные события по всех указанным условиям выше.

-   **Сценарий: Активация триггерных собитый фитнес.**

Активация триггера - Взнос на лицевой счет. Открывается рецепция и на нем выводится созданным нами клиент. И уже через рецепцию делается взнос на основной лицевой счет.

Активация триггера - Остаток денежных средств на лицевом счете меньше или равен. Создается продажа персональной услуги и оплачивается с лицевого счета.

Активация триггера - Окончание срока действия лицевого счета (до события). Открывается рецепция и в ней выбирается клиент, на рецепции нажимается кнопка взноса на лицевой счет и с формы оплаты создается новый вид лицевого счета, со установленый сроком действия С/по(Завтра).

Активация триггера - Списание с лицевого счета. Продается персональная услуга и оплачивается с лицевого счета.

После всех активаций происходит запуск регламента регистрация триггерных событий.

-   **Сценарий: Проверка журнала в фитнесе.**

В сценарии проверки журнала, проверяется журнал регистрации триггерных событиях, проверяется сама табличная часть на наличие событий которые в автотесте записаны в шаблон.

</details>